<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cencalvm: INSTALL File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cencalvm</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>INSTALL File Reference</h1>  </div>
</div>
<div class="contents">

<p>Installation instructions.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Installation instructions. </p>
<p>See <a class="el" href="libsrc_2query_2README.html">libsrc/query/README </a> for a description of the velocity model querying software and how to use it.</p>
<h2><a class="anchor" id="prerequisites"></a>
Software Prerequisites</h2>
<h3><a class="anchor" id="general"></a>
Instructions that apply to ALL examples</h3>
<ol>
<li>
<p class="startli">gzip software<br/>
 version 1.3.3 is known to work</p>
<p>Gzip is required to uncompress the database file and the software tar ball. See <a class="el" href="INSTALL.html#knownissues">Known Issues</a> for more information.</p>
<p class="endli"></p>
</li>
</ol>
<h3><a class="anchor" id="euclid"></a>
Euclid - Etree database library</h3>
<p><a href="http://www-2.cs.cmu.edu/~euclid/">http://www-2.cs.cmu.edu/~euclid/</a></p>
<ol>
<li>
<p class="startli">Download the euclid source code from <a href="http://www-2.cs.cmu.edu/~euclid.">http://www-2.cs.cmu.edu/~euclid.</a></p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Edit the Makefile.</p>
<p>Go to the libsrc directory. Edit the Makefile to suit your system. Some example Makefiles can be found on the USGS EHZ ftp server (<a href="ftp://ehzftp.wr.usgs.gov/baagaard/cencalvm/euclid3/Makefiles">ftp://ehzftp.wr.usgs.gov/baagaard/cencalvm/euclid3/Makefiles</a>). These examples assume the environment variable ETREE_LIBDIR has been set (see below).</p>
<p>Note: The '-DALIGNMENT' flag appears to be required on all big endian systems. The code will compile without it, but you will get core dumps, segmentation faults, and/or bus errors if you don't use it.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Build the library.</p>
<p>Type make and copy the library and all the header files to your favorite local install directory unless they are put there in the Makefile.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Set environment variables.</p>
<p>If the libraries and header files are not installed in system directories, set the environment variables ETREE_LIBDIR, ETREE_INCDIR, and LD_LIBRARY_PATH (or the equivalent) accordingly (you probably want to do this in your .bashrc or .cshrc file or a file that is included by them so that these are set automatically every time you log in). If libetree.so is in /home/tools/etree/lib and header files are in /home/tools/etree/include, then:</p>
<ul>
<li>
<p class="startli">bash shell users</p>
<div class="fragment"><pre class="fragment">
export ETREE_LIBDIR=/home/tools/etree/libsrc
export ETREE_INCDIR=/home/tools/etree/libsrc
export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${ETREE_LIBDIR}
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">tcsh shell users </p>
<div class="fragment"><pre class="fragment">
setenv ETREE_LIBDIR /home/tools/etree/libsrc
setenv ETREE_INCDIR /home/tools/etree/libsrc
setenv LD_LIBRARY_PATH ${LD_LIBRARY_PATH}:${ETREE_LIBDIR}
</pre></div><p class="endli"></p>
</li>
</ul>
<p class="endli"></p>
</li>
</ol>
<h3><a class="anchor" id="proj4"></a>
proj4 - Cartographic projections library</h3>
<p><a href="http://proj.maptools.org/">http://proj.maptools.org/</a><br/>
 version 4.4.9 is known to work</p>
<ol>
<li>
Download the proj4 source code from <a href="http://proj.maptools.org/.">http://proj.maptools.org/.</a> </li>
<li>
Run configure. Helpful arguments include '--prefix=INSTALL_DIR. </li>
<li>
<p class="startli">Run 'make' and then 'make install'.</p>
<p>Although not required, it is useful to download the NAD datum corrections, so that you can use proj4 to convert b/t NAD27 and NAD83/WGS84 datums. These corrections are in proj-nad27-1.2.tar.gz, which should be unpacked into the nad directory.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">If the libraries and files are not installed in system libraries, set the environment variables PROJ4_LIBDIR and PROJ4_INCDIR accordingly (you probably want to do this in your .bashrc or .cshrc file or a file that is included by them so that these are set automatically every time you log in). If libproj.so is in /home/tools/proj4/lib and header files are in /home/tools/proj4/include, then:</p>
<ul>
<li>
<p class="startli">bash shell users</p>
<div class="fragment"><pre class="fragment">
export PROJ4_LIBDIR=/usr/local/proj4/lib
export PROJ4_INCDIR=/usr/local/proj4/include
export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${PROJ4_LIBDIR}
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">tcsh shell users </p>
<div class="fragment"><pre class="fragment">
setenv PROJ4_LIBDIR /usr/local/proj4/lib
setenv PROJ4_INCDIR /usr/local/proj4/include
setenv LD_LIBRARY_PATH ${LD_LIBRARY_PATH}:${PROJ4_LIBDIR}
</pre></div><p class="endli"></p>
</li>
</ul>
<p class="endli"></p>
</li>
</ol>
<h2><a class="anchor" id="optionalsoftare"></a>
Install unit testing software (OPTIONAL)</h2>
<h3><a class="anchor" id="cppunit"></a>
cppunit - C++ unit testing library</h3>
<p><a href="http://cppunit.sourceforge.net">http://cppunit.sourceforge.net</a><br/>
 version 1.10.2 is known to work</p>
<p>This library is used in the unit testing of the code. It is only used for testing and skipping this step will not affect the functionality of the velocity model software.</p>
<ol>
<li>
<p class="startli">Download the cppunit source code from <a href="http://cppunit.sourceforge.net">http://cppunit.sourceforge.net,</a> or install the binary package for your operating system (some linux distributions have cppunit packages).</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Run 'configure' and then 'make' and 'make install'.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">If the libraries and files are not installed in system libraries, set the environment variables CPPUNIT_LIBDIR and CPPUNIT_INCDIR accordingly, in the same manner as you did for the required software.</p>
<p class="endli"></p>
</li>
</ol>
<h2><a class="anchor" id="cencalvm"></a>
cencalvm - USGS Central CA velocity model query software</h2>
<p><a href="ftp://ehzftp.wr.usgs.gov/baagaard/cencalvm/software">ftp://ehzftp.wr.usgs.gov/baagaard/cencalvm/software</a></p>
<ol>
<li>
<p class="startli">Run 'configure' and then 'make' and 'make install'.</p>
<p>Use 'configure --help' to see all of the arguments configure accepts. After 'make install', the header files, libraries, and executables can be found under the PREFIX directory (defined by --prefix=PREFIX when running configure).</p>
<ul>
<li>
<p class="startli">Euclid and Proj4 not in default paths</p>
<p>Configure will fail if it cannot find the header files and libraries for Euclid and Proj4. You will need to set CPPFLAGS and LDFLAGS when running configure. For example if you have defined the environment variables as suggested above, you can simply run configure using </p>
<div class="fragment"><pre class="fragment">
configure \
    CPPFLAGS="-I${ETREE_INCDIR} -I${PROJ4_INCDIR}" \
    LDFLAGS="-L${ETREE_LIBDIR} -L${PROJ4_LIBDIR}"
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Changing the compilers.</p>
<p>You can change the compilers configure will use by setting CC (C), CXX (C++), and FC (Fortran) when running configure. For example, to build using the Sunpro compilers </p>
<div class="fragment"><pre class="fragment">
configure FC=f95 CC=cc CXX=CC
</pre></div><dl class="note"><dt><b>Note:</b></dt><dd>These compilers must be binary compatible! The libraries built by the C++ compiler must be able to be used by the C and Fortran compilers. For example, you CANNOT mix compilers from gcc-3.x and gcc-4.x.</dd></dl>
</li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli">OPTIONAL</p>
<p>If you have cppunit and enabled testing (--enable-testing), then you can run 'make check' to run the unit tests.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Download the velocity model(s) from <a href="ftp://ehzftp.wr.usgs.gov/baagaard/cencalvm/database">ftp://ehzftp.wr.usgs.gov/baagaard/cencalvm/database</a></p>
<p>In the current configuration, the detailed model is required while the extended (regional) model is optional. Use of the extended model is disabled by default. See <a class="el" href="libsrc_2query_2README.html">libsrc/query/README </a> for details on how to enable use of the extended model.</p>
<p>Download the MD5SUM files and check to the integrity of the downloaded file by running 'md5sum -c MD5SUMS_GZIPPED' for the detailed model and 'md5sum -c MD5SUMS_GZIPPEDEXT' for the extended model. After gunzipping the file, you can again check the integrity of the file by running 'md5sum -c MD5SUMS' for the detailed model and 'md5sum -c MD5SUMSEXT' for the extended model. Each time you should get output reporting that the file is OK.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">OPTIONAL</p>
<p>Run the examples for the languages you are interested in. The examples are in the examples/query directory. See <a class="el" href="examples_2query_2README.html">examples/query/README </a> for more information.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Set environment variables to find libraries and executables that are in PREFIX. If the libraries and executables are not installed in system libraries, set the environment variables LD_LIBRARY_PATH and PATH (or their equivalent) accordingly. You will probably want to do this in your .bashrc or .cshrc file or a file that is included by them so that these are set automatically every time you log in.</p>
<ul>
<li>
<p class="startli">bash shell users</p>
<div class="fragment"><pre class="fragment">
export CENCALVM_DIR=/home/johndoe/cencalvm
export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${CENCALVM_DIR}/lib
export PATH=${PATH}:${CENCALVM_DIR}/bin
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">tcsh shell users </p>
<div class="fragment"><pre class="fragment">
setenv CENCALVM_DIR /home/johndoe/cencalvm
setenv LD_LIBRARY_PATH ${LD_LIBRARY_PATH}:${CENCALVM_DIR}/lib
setenv PATH ${PATH}:${CENCALVM_DIR}/bin
</pre></div><p class="endli"></p>
</li>
</ul>
<p class="endli"></p>
</li>
</ol>
<h2><a class="anchor" id="knownissues"></a>
Known Issues</h2>
<ul>
<li>
<p class="startli">Uncompressing the database file gives a 'File too large' error.</p>
<p>Older versions of gzip may not be able to uncompress the large etree database file with is 7.5 GB uncompressed. The workaround is to get gzip version 1.3.3 or later.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Configure warning 'WARNING: etree.h: present but cannot be compiled'.</p>
<p>The Sunpro compiler chokes on the btree.h header file because it contains an empty declaration. The workaround is to change line 39 of btree.h from </p>
<div class="fragment"><pre class="fragment">
typedef struct btree_t {} btree_t;
</pre></div><p> to </p>
<div class="fragment"><pre class="fragment">
typedef struct btree_t { int a; } btree_t;
</pre></div><p class="endli"></p>
</li>
</ul>
<h2><a class="anchor" id="help"></a>
Getting Help</h2>
<p>If you run into problems installing this software, please send an email to Brad Aagaard and include (1) config.log from the top level directory (generated when running configure), (2) a copy of the output showing the error (i.e., dump the output from the command to a file), and (3) a complete description of the problem. </p>
</div></div>
<hr class="footer"/><address class="footer"><small>Generated on Thu May 26 2011 12:51:09 for cencalvm by&#160;
<a href="http://www.stack.nl/~dimitri/doxygen/">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
